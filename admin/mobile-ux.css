/*
 * Custom CSS for improving Decap CMS Mobile User Experience.
 */

@media (max-width: 768px) {
  /* --- General Layout Overhaul --- */

  /* Hide the desktop sidebar, we will replace it with a mobile panel */
  [data-testid="sidebar"] {
    display: none !important;
  }

  /* Make the main content area take up the full width */
  main[class*="App-main"] {
    padding-left: 0 !important;
    width: 100vw;
  }

  /* --- Stack Editor and Preview Panes Vertically --- */
  div[class*="Editor-root"] {
    flex-direction: column;
  }

  div[class*="Editor-editorPane"],
  div[class*="Editor-previewPane"] {
    width: 100% !important; /* Override inline styles */
    max-width: 100% !important;
    min-height: 70vh;
  }

  /* --- Touch-Optimized Form Controls --- */
  label[class*="Field-label"] {
    font-size: 16px !important; /* Prevents iOS zoom */
  }

  input[class*="StyledWidget-input"],
  textarea[class*="StyledWidget-textarea"],
  select[class*="StyledWidget-select"] {
    font-size: 16px !important; /* Prevents iOS zoom */
  }

  button,
  button[class*="Button-button"] {
    min-height: 44px; /* Apple's recommended touch target size */
  }

  /* --- Styles for Mobile Sliding Panels & Toggles (to be created by JS) --- */
  .mobile-panel-toggles {
    display: flex;
    position: fixed;
    bottom: 0;
    width: 100%;
    z-index: 1001; /* Above the panels */
    border-top: 1px solid #e0e0e0;
  }

  .mobile-panel-toggle {
    flex: 1;
    padding: 14px;
    background: #f7f7f7;
    color: #333;
    border: none;
    border-left: 1px solid #e0e0e0;
    font-size: 16px;
    cursor: pointer;
    font-weight: 500;
  }
  .mobile-panel-toggle:first-child {
    border-left: none;
  }

  .mobile-panel {
    display: block; /* Will be shown/hidden by JS */
    position: fixed;
    left: 0;
    bottom: 0;
    width: 100%;
    height: 70vh; /* Taller panel */
    background: white;
    box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
    transform: translateY(100%);
    transition: transform 0.3s ease-in-out;
    z-index: 1000;
    overflow-y: auto;
    padding: 1rem;
    padding-bottom: 80px; /* Space for the bottom bar */
  }

  .mobile-panel.active {
    transform: translateY(0);
  }
}
