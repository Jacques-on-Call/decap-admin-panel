<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Authentication Callback Diagnostic</title>
<style>
    body { font-family: monospace; background: #222; color: #eee; margin: 10px; font-size: 14px; }
    h1 { color: #fff; border-bottom: 1px solid #555; padding-bottom: 10px; }
    div { margin: 10px 0; padding: 5px; border: 1px solid #444; border-radius: 4px; word-break: break-all; }
    .label { font-weight: bold; color: #88f; }
</style>
</head>
<body>
    <h1>Callback Diagnostic Page</h1>
    <p>This page will stay open so you can see the results of the GitHub redirect.</p>

    <div id="full-url">
        <span class="label">Full URL:</span>
        <span id="full-url-value"></span>
    </div>

    <div id="query-params">
        <span class="label">Query Parameters:</span>
        <span id="query-params-value"></span>
    </div>

    <div id="hash-params">
        <span class="label">Hash Parameters:</span>
        <span id="hash-params-value"></span>
    </div>

    <div id="code">
        <span class="label">Detected `code`:</span>
        <span id="code-value"></span>
    </div>

    <div id="error">
        <span class="label">Detected `error`:</span>
        <span id="error-value"></span>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const fullUrl = window.location.href;
        const queryParams = new URLSearchParams(window.location.search);
        const hashParams = new URLSearchParams(window.location.hash.substring(1));

        const code = queryParams.get('code');
        const error = queryParams.get('error') || hashParams.get('error');

        document.getElementById('full-url-value').textContent = fullUrl;
        document.getElementById('query-params-value').textContent = window.location.search || '(empty)';
        document.getElementById('hash-params-value').textContent = window.location.hash || '(empty)';
        document.getElementById('code-value').textContent = code || '(not found)';
        document.getElementById('error-value').textContent = error || '(not found)';
    });
    </script>
</body>
</html>
